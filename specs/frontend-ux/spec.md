# spec: frontend-ux

## 概述
此规范定义 `frontend-ux` 能力的验收准则、浏览器支持、性能与无障碍要求。该能力旨在提升 `WebJson` 前端的可用性、可读性和错误反馈能力，且不更改后端 API。

## Acceptance Criteria (验收准则)
- 页面在常见桌面与移动浏览器上正确布局：窗口宽度在 320px - 1440px 范围内无破坏性布局问题。
- 支持三种视图：`pretty`（服务器返回，缩进 4 空格）、`raw`（原始输入）、`minified`（前端压缩）。
- 文件读取：用户选择本地文件后能正确读取文本并显示文件名、大小；超过 1MB 显示性能提示；超过 5MB 在前端阻止并提示（后端同样限制）。
- 格式化请求：对有效 JSON，`POST /format` 返回 200 且页面显示格式化结果；对无效 JSON，页面显示来自后端的 `error` 字段并可复制错误信息。
- 下载：点击下载按钮能在主流浏览器上下载 `.json` 文件，默认文件名 `formatted.json`，并允许用户输入自定义文件名。
- 可访问性：主要控件可通过键盘（Tab）访问，错误提示使用 `role="alert"`，主题切换与按钮有明显焦点样式。

## Browser Support
- 支持并在以下浏览器中验证：最新两版 Chrome、Firefox、Edge、Safari（桌面 + 移动）。

## Performance Limits
- 前端对单次文本大小建议上限：1MB（显示性能警告）。
- 后端限制：5MB，超出返回 413（服务器端强制）。

## Error & Logging
- 前端应把后端返回的 `error` 字段原样展示，并在控制台记录解析错误（便于开发调试）。

## Security Considerations
- 前端不执行任何输入内容。避免在 DOM 中注入未经转义的用户输入。

## Test Cases (示例)
1. 有效小 JSON（<1KB）：粘贴并点击格式化，验证格式化结果与 `json.dump(4)` 等效。
2. 无效 JSON：粘贴后点击格式化，验证页面显示后端返回的错误信息并可复制。
3. 本地文件读取：选择 `example.json`（10KB），读取并展示文件名/大小，点击格式化并验证结果。
4. 大文件警告：选择 2MB 文件，页面提示性能风险并允许继续但显示警告。
5. 下载验证：格式化后点击下载，确认浏览器保存文件且内容与结果一致。

## Notes
- 本规范不要求使用前端框架；应采用轻量实现，优先使用原生 DOM/Fetch API。
